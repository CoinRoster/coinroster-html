<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>CoinRoster | My Account</title>
    <!--#include virtual="/ssi/head.html" -->
    <link rel="stylesheet" type="text/css" href="/css/account.css">
    <script type="text/javascript" src="/js/account.js"></script>
</head>
<body>
<!--#include virtual="/ssi-java/nav" -->
<!--#include virtual="/ssi/simple_modal.html" -->
<div id="centering_container">
    <div id="category_header" class="body_container header">
        <h3 id="account_header" class="section_header orange_actual">
            <span class='steel'>Welcome,</span>
            &nbsp;
            <span id="username_placeholder"></span>
        </h3>
    </div>
    <div class="table_body_container transaction_table_body">
        <div id="balance_table_wrapper">
            <table id="balance_table_outer">
                <tr id="available_balance_wrapper">
                    <td id="available_balance_header" class="heading_cell">
                        Ready to play:
                    </td>
                    <td class="balance_table_cell">
                        <table class="balance_table">
                            <tr id="btc_balance_row" class="hidden">
                                <td>
                                    <div id="btc_balance" class="steel"></div>
                                </td>
                            </tr>
                            <tr id="rc_balance_row" class="hidden">
                                <td id="rc_balance_cell">
                                    <div id="rc_balance" class="steel"></div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div id="available_balance" class="btc_balance"></div>
                                    <div id="available_balance_fiat" class="fiat_balance hidden_"></div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr id="in_play_balance_wrapper" class="hidden_">
                    <td class="heading_cell">
                        In <a href="/contests" class="inline_link white">Contests</a>:
                    </td>
                    <td class="balance_table_cell">
                        <table class="balance_table">
                            <tr>
                                <td>
                                    <span id="in_play_balance" class="btc_balance orange"></span>
                                    <span id="in_play_balance_fiat" class="fiat_balance"></span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr id="total_balance_wrapper" class="hidden_">
                    <td class="heading_cell">
                        Total:
                    </td>
                    <td class="balance_table_cell">
                        <table class="balance_table">
                            <tr>
                                <td id="total_balance_cell">
                                    <span id="total_balance" class="btc_balance"></span>
                                    <span id="total_balance_fiat" class="fiat_balance"></span>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <div id="account_menu">
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/deposit.html">
                DEPOSIT
            </a>
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/withdraw.html">
                WITHDRAW
            </a>
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/refer.html">
                REFER A FRIEND!
            </a>
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/transactions.html">
                TRANSACTION HISTORY
            </a>
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/password.html">
                CHANGE PASSWORD
            </a>
            <a class="subwindow clickable_subwindow link_subwindow" href="/account/currency.html">
                CHANGE DISPLAY CURRENCY
            </a>
            <a id="add_ext_address_subwindow" class="subwindow clickable_subwindow link_subwindow" href="/account/wallet.html" style="display:none">
                CONNECT BITCOIN WALLET
            </a>
            <a id="manage_ext_address_subwindow" class="subwindow clickable_subwindow link_subwindow" href="/account/wallet.html" style="display:none">
                MANAGE BITCOIN WALLET
            </a>
            <a id="add_email_subwindow" class="subwindow clickable_subwindow link_subwindow" href="/account/email.html" style="display:none">
                ADD EMAIL ADDRESS
            </a>
            <a id="manage_email_subwindow" class="subwindow clickable_subwindow link_subwindow" href="/account/email.html" style="display:none">
                MANAGE EMAIL
            </a>
        </div>
    </div>
</div>
<script type="text/javascript" src="/js/btc_inputs.js"></script>
<script type="text/javascript">
     
    window.nav_text = "MY ACCOUNT";

    function init()
        {
        id("username_placeholder").innerHTML = window.session.username;
        api({ 
            method: "GetAccountDetails", 
            args: {} 
        }, function(call)
            {
            if (call.status === "1")
                {
                var 

                btc_balance = call.btc_balance,
                rc_balance = call.rc_balance,
                available_balance = add(btc_balance, rc_balance),
                in_play_balance = call.in_play_balance,
                total_balance = add(available_balance, in_play_balance),
                
                ext_address = call.ext_address,
                email_address = call.email_address;
        
                if (ext_address !== "") show("manage_ext_address_subwindow");
                else show("add_ext_address_subwindow");
                if (email_address !== "") show("manage_email_subwindow");
                else show("add_email_subwindow");

                if (available_balance === 0)
                    {
                    id("available_balance").innerHTML = "0.00<div id='deposit_prompt_major' class='green' onclick='deposit()'>DEPOSIT!</div>";
                    id("available_balance_fiat").innerHTML = getFiatDisplay(0, "never_inline");
                    id("available_balance").className += " red_orange";
                    }
                else
                    {
                    if (rc_balance !== 0) // only show composition of available_balance if it isn't straight BTC
                        {
                        show("btc_balance_row", "table-row");
                        show("rc_balance_row", "table-row");
                        id("btc_balance").innerHTML = toBTC(btc_balance, false) + " BTC";
                        id("rc_balance").innerHTML = toBTC(rc_balance, false) + " RC";
                        }
                    id("available_balance").innerHTML = toBTC(available_balance, false) + " BTC";
                    id("available_balance_fiat").innerHTML = getFiatDisplay(available_balance, "never_inline");
                    id("available_balance").className += " green";
                    show("available_balance_fiat");
                    }

                show("in_play_balance_wrapper", "table-row");
                show("total_balance_wrapper", "table-row");
                id("in_play_balance").innerHTML = toBTC(in_play_balance, false) + " BTC";
                id("in_play_balance_fiat").innerHTML = getFiatDisplay(in_play_balance, "never_inline");
                id("total_balance").innerHTML = toBTC(total_balance, false) + " BTC";
                id("total_balance_fiat").innerHTML = getFiatDisplay(total_balance, "never_inline");

                }
            });
        }
        
</script>
<script type="text/javascript" src="/js/nav.js"></script>
<!--#include virtual="/ssi/google_analytics.html" -->
</body>
</html>
