<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>CoinRoster | Bitcoin Fantasy</title>
    <meta name="description" content="CoinRoster offers Daily Fantasy Sports for Bitcoin! Join a contest, create a roster, and win!" />
    <meta name="keywords" content="coinroster, bitcoin, daily fantasy sports, dfs, fantasy sports" />
    <meta name="Robots" content="index,follow,NOODP" />  
    <meta name="googlebot" content="NOODP" />        
    <meta name="rating" content="General" />
    <!--#include virtual="/ssi/head.html" -->
    <link rel="stylesheet" type="text/css" href="/css/lobby.css">
    <script type="text/javascript" src="/js/lobby.js"></script>
</head>
<body>
<!--#include virtual="/ssi/nav.html" -->
<!--#include virtual="/ssi/simple_modal.html" -->
<div id="centering_container">
    <div id="body_container">
        <div id="page_title">
            Lobby
        </div>
        <div class="contest_category_title">
            Daily Fantasy Sports / Golf
        </div>
        <hr noshade>
        <table id="dfs_golf_table" class="contest_table"></table>
        <div class="contest_category_title">
            Pari-mutuel Pools
        </div>
        <hr noshade>
    </div>
</div>
<script>

    function init()
        {
        api({ 
            method: "ContestReport", 
            args: {} 
        }, function(call)
            {
            var 
            
            contest_report = call.contest_report,
            contest_report_array = [],
            number_of_contests = contest_report.length;
    
            if (number_of_contests === 0)
                {
                var row = new_row(id("dfs_golf_table"), -1, [
                    "No open contests. Please check back soon."
                ]);
                row[1].style.textAlign = "left";
                }
            else
                {
                var header = new_row(id("dfs_golf_table"), -1, [
                    "Contest",
                    "Game type",
                    "Entry fee",
                    "Entries",
                    "Prize pool",
                    "Live at",
                    ""
                ]);
                
                header[0].style.background = "none";
                header[0].style.border = "none";
                
                for (var i=1; i<header.length; i++)
                    {
                    header[i].style.fontSize = "14px";
                    header[i].style.paddingBottom = "10px";
                    }
                    
                header[1].style.textAlign = "left";
                header[2].style.textAlign = "left";

                for (var i=0; i<number_of_contests; i++)
                    {
                    var contest_item = contest_report[i],

                    contest_id = contest_item.id,
                    created = contest_item.created,

                    category = contest_item.category,
                    sub_category = contest_item.sub_category,
                    category_string = category.toLowerCase(),
                    sub_category_string = category.toLowerCase() + "_" + sub_category.toLowerCase(),
                    table_id = sub_category_string + "_table",
                    table = id(table_id),

                    title = contest_item.title,
                    description = contest_item.description,
                    settlement_type = contest_item.settlement_type,
                    pay_table = contest_item.pay_table,
                    odds_table = contest_item.odds_table,
                    salary_cap = contest_item.salary_cap,
                    cost_per_entry = contest_item.cost_per_entry,
                    min_users = contest_item.min_users,
                    max_users = contest_item.max_users,
                    entries_per_user = contest_item.entries_per_user,
                    roster_size = contest_item.roster_size,
                    
                    number_of_entries = contest_item.number_of_entries,
                    value = Number(toBTC(number_of_entries * cost_per_entry)),
                    
                    registration_deadline = contest_item.registration_deadline,
                    registration_deadline_date = dateconv_ms_to_string(registration_deadline),
                    registration_deadline_time = dateconv_ms_to_time(registration_deadline),
                    registration_deadline_string = registration_deadline_date + "<br/>" + registration_deadline_time,
                    
                    status = contest_item.status,
                    status_string,
                    
                    button_string,
                    
                    show_contest = false;
            
                    switch (status)
                        {
                        case 1:
                            show_contest = true;
                            button_string = "Enter";
                            status_string = "Reg open";
                            break;
                        case 2:
                            show_contest = true;
                            button_string = "View";
                            status_string = "In play";
                            registration_deadline_string = "In play";
                            break;
                        /*case 3:
                            status_string = "Settled";
                            break;
                        case 4:
                            status_string = "Under-subscribed";
                            break;
                        case 5:
                            status_string = "Cancelled";
                            break;*/
                        }
                        
                    if (show_contest)
                        {
                        var row = new_row(table, -1, [
                            title,
                            settlement_type + "<br/><div id=\"payout_info_" + contest_id + "\" class=\"payout_info_link blue\">Payout info</div>",
                            cost_per_entry + " BTC",
                            number_of_entries,
                            value + " BTC",
                            registration_deadline_string,
                            "<button class=\"text_button\" style=\"width:auto\" onclick=\"redirect_to_contest('" + category_string + "'," + contest_id + ",'" + button_string + "')\">" + button_string + "</button>"
                        ]);
                        
                        row[1].onclick = (function(category_string, contest_id, button_string)
                            {
                            return function()
                                {
                                redirect_to_contest(category_string, contest_id, button_string);
                                }
                            })(category_string, contest_id, button_string);
                        row[1].style.textAlign = "left";
                        row[2].style.textAlign = "left";
                            
                        bind_payout_window(id("payout_info_" + contest_id), settlement_type, pay_table, entries_per_user);
                        }
                    }
                }
            });
        }
        
    function redirect_to_contest(category_string, contest_id, button_string)
        {
        if (typeof window.session !== "undefined") location = "lobby/" + category_string + ".html?id=" + contest_id;
        else show_simple_modal("You must log in to " + button_string.toLowerCase() + " this contest", "good", function()
            {
            location = "login.html";
            });
        }
        
</script>
<script type="text/javascript" src="/js/nav.js"></script>
<!--#include virtual="/ssi/google_analytics.html" -->
</body>
</html>
